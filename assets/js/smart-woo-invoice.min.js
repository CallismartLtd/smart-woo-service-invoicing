function smartwooPrintinvoice(){let e=document.querySelector(".sw-invoice-template");if(!e)return;let t=e.innerHTML;const n=smart_woo_vars.smartwoo_assets_url+"css/smart-woo-invoice.css",o=new Blob([`\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>Print Invoice</title>\n            <link rel="stylesheet" href="${n}" type="text/css" media="all" />\n            <style>\n                /* Add any specific print styles or overrides here */\n                .sw-invoice-item-table {\n                    width: 90% !important;\n                    margin: 0 auto;\n                }\n                .sw-cls-btn-no-print {\n                    position: fixed;\n                    top: 10px;\n                    right: 10px;\n                    z-index: 9999;\n                    font-size: 20px;\n                    cursor: pointer;\n                    background: #eee;\n                    border: 1px solid #ccc;\n                    padding: 5px 10px;\n                    border-radius: 5px;\n                }\n                @media print {\n                    .sw-cls-btn-no-print {\n                        display: none !important;\n                    }\n                }\n            </style>\n        </head>\n        <body>\n            <div class="smartwoo-print-container">\n                ${t}\n            </div>\n            <button class="sw-cls-btn-no-print">X</button>\n        </body>\n        </html>\n    `],{type:"text/html"}),i=URL.createObjectURL(o);let r=window.open(i,"_blank");if(!r)return showNotification("Invoice download failed: Please allow pop-ups to print the invoice."),void URL.revokeObjectURL(i);r.onload=()=>{r.focus(),r.print(),URL.revokeObjectURL(i)},r.addEventListener("afterprint",(()=>{r.close()})),setTimeout((()=>{const e=r.document.querySelector(".sw-cls-btn-no-print");e&&e.addEventListener("click",(()=>{r.close()}))}),50)}async function smartwooDownloadInvoice(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);const n=t.headers.get("Content-Disposition");let o="invoice.pdf";if(n){const e=/filename="([^"]+)"/i.exec(n);e&&e.length>1&&(o=e[1])}const i=await t.blob(),r=window.URL.createObjectURL(i),c=document.createElement("a");c.href=r,c.download=o,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(r),document.body.removeChild(c)}catch(e){showNotification("Failed to download invoice. Please try again.",6e3)}}document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector(".sw-invoice-template"),t=document.querySelector("#smartwoo-print-invoice-btn"),n=document.querySelector("#smartwoo-download-invoice-btn");e&&smart_woo_vars.is_account_page&&(e.style.minWidth="90%"),t&&t.addEventListener("click",smartwooPrintinvoice),n&&n.addEventListener("click",(e=>{e.preventDefault(),smartwooDownloadInvoice(n.getAttribute("data-package-url"))}))}));