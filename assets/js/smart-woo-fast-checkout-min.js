function smartwooFastCheckout(){let e=document.querySelectorAll(".product_type_sw_product.add_to_cart_button");e.length&&e.forEach(e=>{e.addEventListener("click",smartwooOpenModal)})}function smartwooOpenModal(e){let t=e.target.getAttribute("data-product_id");if(!t){let r=e.target.closest("[data-product_id]");r&&(t=r.dataset.product_id)}if(!t){console.warn("Product ID not found. Fast checkout prevented.");return}e.preventDefault();let a=e=>{e.classList.remove("active"),setTimeout(()=>{e.remove()},1e3)},n=document.querySelector(".sw-fast-checkout-main");n&&a(n);let o=document.createElement("div"),d=document.createElement("span"),i=document.createElement("h3"),s=document.createElement("div");i.textContent=`Configure ${e.target.getAttribute("data-product_name")?`"${e.target.getAttribute("data-product_name")}"`:""}`,i.style.padding="5px";let c=`
        <div id="response"></div>
        <input type="text" name="service_name" id="service_name" placeholder="Service Name (required)"/>
        <input type="text" name="service_url" id="service_url" placeholder="URL (optional)"/>
        <button class="sw-blue-button">Checkout</button>
        <div id="loader" style="background-color:rgba(255, 255, 255, 0);"></div>

    `;d.setAttribute("style","height: 20px; float: right; text-align: right; color: red; margin-right: 10px; cursor: pointer; font-weight: 900;"),d.textContent="x",o.classList.add("sw-fast-checkout-main"),s.classList.add("sw-flex-column"),s.style.position="relative",s.innerHTML=c,o.appendChild(d),o.appendChild(i),o.appendChild(s),document.body.prepend(o),setTimeout(()=>{o.classList.add("active")},50),d.addEventListener("click",()=>{a(o)});let l=e=>{("Escape"===e.key||"Esc"===e.key)&&a(o),document.removeEventListener("keydown",l)};document.addEventListener("keydown",l),(checkoutBtn=o.querySelector("button")).addEventListener("click",e=>{var r;let a=o.querySelector("#service_name"),n=o.querySelector("#service_url"),d=o.querySelector("#response");if(d.style.border="solid 1px #dcdcde",d.style.padding="5px",d.style.minHeight="40px",!a.value.trim().length){d.innerHTML="Please enter a service name";return}d.innerHTML="",d.style.border="none";let i=smartWooAddSpinner("loader",!0),s,c=(r=o,s=[" #ffffff","#e2def5","#b3afaf","#e0f6ff"],setInterval(()=>{r.style.backgroundColor=s[Math.floor(Math.random()*s.length)]},200));i.style.position="absolute",i.style.top="20%",i.style.left="40%";let l=new FormData;l.append("security",smart_woo_vars.security),l.append("product_id",t),l.append("service_name",a.value),l.append("service_url",n.value),l.append("action","smartwoo_configure_product"),fetch(smart_woo_vars.ajax_url,{method:"POST",body:l}).then(e=>{if(!e.ok)throw d.innerHTML="Request cannot be completed",d.style.border="solid 1px #dcdcde",Error(e.statusText,6e3);return e.json()}).then(e=>{e.success?(d.style.border="solid 1px #dcdcde",d.innerHTML=e.data.message?e.data.message:"Product configured, redirecting to checkout.",window.location.href=e.data.checkout):(d.style.border="solid 1px #dcdcde",d.innerHTML=e.data.message?e.data.message:"Something went wrong.")}).catch(e=>{console.error(e)}).finally(()=>{smartWooRemoveSpinner(i),clearInterval(c)})})}document.addEventListener("DOMContentLoaded",smartwooFastCheckout);